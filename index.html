<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>San Valentín — Árbol de Corazones</title>
  <style>
    :root{
      --bg1:#ff2f83;
      --bg2:#b100ff;
      --panel:#f3e6d7;
      --text:#3b2a2a;
      --muted:#6b5a5a;
      --shadow: 0 20px 60px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:white;
      overflow:hidden;
      background:
        radial-gradient(1200px 700px at 30% 20%, rgba(255,255,255,.12), transparent 60%),
        radial-gradient(900px 600px at 80% 70%, rgba(255,255,255,.08), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
    }

    /* bokeh hearts */
    .bokeh{
      position:fixed; inset:0; pointer-events:none; overflow:hidden;
      filter: blur(.2px);
      opacity:.85;
    }
    .bokeh i{
      position:absolute;
      width:14px; height:14px;
      background: rgba(255,255,255,.14);
      transform: rotate(45deg);
      border-radius: 3px;
      animation: floaty var(--d,12s) linear infinite;
      left: var(--x,50%);
      top: 110%;
    }
    .bokeh i::before,.bokeh i::after{
      content:"";
      position:absolute; width:14px; height:14px;
      background: inherit; border-radius: 50%;
    }
    .bokeh i::before{ left:-7px; top:0 }
    .bokeh i::after{ left:0; top:-7px }
    @keyframes floaty{
      0%{ transform: translateY(0) rotate(45deg) scale(var(--s,1)); opacity:0 }
      10%{ opacity:.8 }
      100%{ transform: translateY(-140vh) rotate(45deg) scale(var(--s,1)); opacity:0 }
    }

    /* layout */
    .stage{
      position:relative;
      height:100%;
      display:grid;
      place-items:center;
      padding:24px;
    }

    .card{
      width:min(980px, 94vw);
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 28px;
      box-shadow: var(--shadow);
      overflow:hidden;
      display:grid;
      grid-template-columns: 1fr;
      backdrop-filter: blur(10px);
    }

    .top{
      position:relative;
      padding:22px 22px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
    }
    .brand{
      font-weight:800;
      letter-spacing:.12em;
      opacity:.9;
    }
    .hint{
      opacity:.85;
      font-size:.95rem;
    }

    .content{
      position:relative;
      display:grid;
      grid-template-columns: 1fr;
      gap:16px;
      padding: 18px 18px 22px;
    }

    /* panel that appears later */
    .letter{
      background: var(--panel);
      color: var(--text);
      border-radius: 22px;
      padding: 18px 18px 14px;
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
      transform: translateY(16px);
      opacity:0;
      transition: opacity .8s ease, transform .8s ease;
    }
    .letter.show{
      opacity:1;
      transform: translateY(0);
    }
    .letter p{
      margin:0;
      font-size:1.05rem;
      line-height:1.5;
    }
    .letter .muted{ color: var(--muted) }
    .timer{
      margin-top:6px;
      padding-top:12px;
      border-top: 2px solid rgba(59,42,42,.18);
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:baseline;
      justify-content:space-between;
    }
    .timer .label{
      font-size:.95rem;
      color: var(--muted);
    }
    .timer .value{
      font-variant-numeric: tabular-nums;
      font-weight:800;
      letter-spacing:.02em;
      color: var(--text);
      font-size: 1.05rem;
    }

    /* visual area with heart button + tree */
    .scene{
      position:relative;
      min-height: 440px;
      border-radius: 24px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.14);
      background:
        radial-gradient(700px 350px at 50% 30%, rgba(255,255,255,.14), transparent 60%),
        linear-gradient(135deg, rgba(0,0,0,.12), rgba(0,0,0,.24));
    }

    .centerBtnWrap{
      position:absolute; inset:0;
      display:grid;
      place-items:center;
      transition: opacity .6s ease;
      z-index:5;
    }
    .centerBtnWrap.hide{ opacity:0; pointer-events:none }

    .heartBtn{
      width:128px; height:128px;
      border:none;
      cursor:pointer;
      background: transparent;
      position:relative;
      filter: drop-shadow(0 16px 26px rgba(0,0,0,.35));
      transform: translateY(0) scale(1);
      transition: transform .2s ease;
      outline:none;
    }
    .heartBtn:active{ transform: translateY(2px) scale(.98) }
    .heartShape{
      position:absolute; inset:0;
      background: linear-gradient(135deg, #ff3b7a, #ff004d);
      transform: rotate(45deg);
      border-radius: 16px;
      animation: pulse 1.2s ease-in-out infinite;
    }
    .heartShape::before,.heartShape::after{
      content:"";
      position:absolute; width:128px; height:128px;
      background: inherit; border-radius: 50%;
    }
    .heartShape::before{ left:-64px; top:0 }
    .heartShape::after{ left:0; top:-64px }
    .heartText{
      position:absolute; inset:0;
      display:grid; place-items:center;
      transform: rotate(0deg);
      font-weight:900;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-size:.85rem;
      color: rgba(255,255,255,.92);
      text-shadow: 0 10px 25px rgba(0,0,0,.35);
      user-select:none;
    }
    @keyframes pulse{
      0%,100%{ transform: rotate(45deg) scale(1) }
      50%{ transform: rotate(45deg) scale(1.06) }
    }

    /* tree container */
    .treeWrap{
      position:absolute;
      inset:0;
      display:flex;
      align-items:flex-end;
      justify-content:center;
      padding-bottom: 26px;
      transition: transform 1s ease;
    }
    .treeWrap.right{
      transform: translateX(22%);
    }

    .tree{
      position:relative;
      width: 340px;
      height: 380px;
    }

    /* trunk grows down */
    .trunk{
      position:absolute;
      left:50%;
      bottom:0;
      width: 34px;
      height: 0px;
      background: linear-gradient(180deg, #7a3b1b, #4a240f);
      border-radius: 18px;
      transform: translateX(-50%);
      box-shadow: 0 16px 30px rgba(0,0,0,.25);
    }
    .tree.animate .trunk{
      animation: trunkGrow 1.2s ease forwards;
    }
    @keyframes trunkGrow{
      from{ height: 0 }
      to{ height: 210px }
    }

    /* branches */
    .branch{
      position:absolute;
      left:50%;
      bottom: 165px;
      width: 0px;
      height: 14px;
      background: linear-gradient(180deg, #6a3418, #3d1d0c);
      border-radius: 14px;
      transform-origin: left center;
      opacity:0;
    }
    .tree.animate .branch{
      opacity:1;
    }

    .b1{ transform: translateX(-6px) rotate(-18deg); }
    .b2{ transform: translateX(-6px) rotate(18deg); }
    .b3{ bottom: 195px; transform: translateX(-6px) rotate(-35deg); }
    .b4{ bottom: 195px; transform: translateX(-6px) rotate(35deg); }

    .tree.animate .b1{ animation: branchGrow 0.8s 0.85s ease forwards; }
    .tree.animate .b2{ animation: branchGrow 0.8s 0.95s ease forwards; }
    .tree.animate .b3{ animation: branchGrow 0.75s 1.05s ease forwards; }
    .tree.animate .b4{ animation: branchGrow 0.75s 1.15s ease forwards; }

    @keyframes branchGrow{
      from{ width: 0 }
      to{ width: 130px }
    }

    /* heart canopy appears */
    .canopy{
      position:absolute;
      left:50%;
      bottom: 170px;
      width: 320px;
      height: 250px;
      transform: translateX(-50%);
      opacity:0;
      filter: drop-shadow(0 18px 30px rgba(0,0,0,.25));
    }
    .tree.animate .canopy{
      animation: canopyIn .9s 1.55s ease forwards;
    }
    @keyframes canopyIn{
      from{ opacity:0; transform: translateX(-50%) translateY(18px) scale(.92) }
      to{ opacity:1; transform: translateX(-50%) translateY(0) scale(1) }
    }

    .leaf{
      position:absolute;
      width: 18px; height: 18px;
      transform: rotate(45deg);
      border-radius: 4px;
      background: var(--c,#ff2c5e);
      opacity:0;
      animation: pop .55s ease forwards;
    }
    .leaf::before,.leaf::after{
      content:"";
      position:absolute; width:18px; height:18px;
      background: inherit; border-radius:50%;
    }
    .leaf::before{ left:-9px; top:0 }
    .leaf::after{ left:0; top:-9px }

    @keyframes pop{
      from{ transform: rotate(45deg) scale(.4); opacity:0 }
      to{ transform: rotate(45deg) scale(1); opacity:1 }
    }

    /* falling hearts (in scene) */
    .fallLayer{
      position:absolute; inset:0;
      pointer-events:none;
      overflow:hidden;
      opacity:0;
      transition: opacity .6s ease;
      z-index:4;
    }
    .fallLayer.on{ opacity:1 }
    .fall{
      position:absolute;
      top:-40px;
      width: 14px; height:14px;
      transform: rotate(45deg);
      border-radius: 3px;
      background: var(--c,#ff335c);
      opacity:.95;
      animation: fall var(--t,6s) linear infinite;
      left: var(--x,50%);
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.18));
    }
    .fall::before,.fall::after{
      content:"";
      position:absolute; width:14px; height:14px;
      background: inherit; border-radius:50%;
    }
    .fall::before{ left:-7px; top:0 }
    .fall::after{ left:0; top:-7px }
    @keyframes fall{
      0%{ transform: translateY(0) rotate(45deg); opacity:0 }
      10%{ opacity:.95 }
      100%{ transform: translateY(520px) rotate(45deg); opacity:0 }
    }

    /* responsive: two columns when wide */
    @media (min-width: 860px){
      .content{ grid-template-columns: 1.05fr .95fr; align-items:stretch; }
      .letter{ order:1 }
      .scene{ order:2; min-height: 460px; }
    }
  </style>
</head>
<body>
  <div class="bokeh" aria-hidden="true" id="bokeh"></div>

  <main class="stage">
    <section class="card">
      <div class="top">
        <div class="brand">ALEX DEV</div>
        <div class="hint" id="hint">Toca el corazón ❤️</div>
      </div>

      <div class="content">
        <div class="letter" id="letter">
          <p class="muted">Para el amor de mi vida:</p>
          <p>
            Si pudiera elegir un lugar seguro, sería a tu lado.<br/>
            Cuanto más tiempo estoy contigo más te amo.
          </p>
          <div class="timer">
            <div class="label">Mi amor por ti comenzó hace…</div>
            <div class="value" id="counter">—</div>
          </div>
        </div>

        <div class="scene" id="scene">
          <div class="fallLayer" id="fallLayer" aria-hidden="true"></div>

          <div class="centerBtnWrap" id="centerWrap">
            <button class="heartBtn" id="startBtn" type="button" aria-label="Iniciar animación">
              <span class="heartShape"></span>
              <span class="heartText">Click</span>
            </button>
          </div>

          <div class="treeWrap" id="treeWrap">
            <div class="tree" id="tree">
              <div class="trunk"></div>
              <div class="branch b1"></div>
              <div class="branch b2"></div>
              <div class="branch b3"></div>
              <div class="branch b4"></div>

              <div class="canopy" id="canopy" aria-hidden="true"></div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // ====== CONFIG (edita esto) ======
    // Pon aquí la fecha/hora real de inicio de tu relación:
    // Formato: "YYYY-MM-DDTHH:MM:SS" (hora local)
    const START_DATE_ISO = "2025-02-14T00:00:00";

    // Textos (edítalos si quieres)
    const BRAND_TEXT = "ALEX DEV";
    const TITLE_HINT_IDLE = "Toca el corazón ❤️";
    const TITLE_HINT_DONE = "❤️ Feliz San Valentín";

    // ====== helpers ======
    const $ = (s)=>document.querySelector(s);
    const brandEl = document.querySelector(".brand");
    const hintEl = $("#hint");
    brandEl.textContent = BRAND_TEXT;

    // Bokeh background hearts
    const bokeh = $("#bokeh");
    for(let i=0;i<26;i++){
      const el = document.createElement("i");
      el.style.setProperty("--x", (Math.random()*100).toFixed(2)+"%");
      el.style.setProperty("--d", (10+Math.random()*10).toFixed(2)+"s");
      el.style.setProperty("--s", (0.7+Math.random()*1.8).toFixed(2));
      el.style.animationDelay = (-Math.random()*16).toFixed(2)+"s";
      bokeh.appendChild(el);
    }

    // Counter
    const counterEl = $("#counter");
    const startDate = new Date(START_DATE_ISO);
    function pad(n){ return String(n).padStart(2,"0"); }
    function updateCounter(){
      const now = new Date();
      let diff = Math.max(0, now - startDate);

      const sec = Math.floor(diff/1000);
      const days = Math.floor(sec/86400);
      const hours = Math.floor((sec%86400)/3600);
      const mins = Math.floor((sec%3600)/60);
      const secs = sec%60;

      counterEl.textContent = `${days} días ${pad(hours)} horas ${pad(mins)} minutos ${pad(secs)} segundos`;
    }
    setInterval(updateCounter, 1000);
    updateCounter();

    // Build canopy hearts (deterministic-ish random layout)
    const canopy = $("#canopy");
    const heartColors = ["#ff1e4d","#ff2c5e","#ff4776","#ff6b8f","#d80f3a","#b9002f","#ff3b61"];
    function makeLeaf(x,y,delay){
      const d = document.createElement("div");
      d.className = "leaf";
      d.style.left = x+"px";
      d.style.top = y+"px";
      d.style.setProperty("--c", heartColors[Math.floor(Math.random()*heartColors.length)]);
      d.style.animationDelay = delay+"s";
      canopy.appendChild(d);
    }
    function buildCanopy(){
      canopy.innerHTML = "";
      const w = 320, h = 250;
      // heart-shaped distribution
      let count = 95;
      let delayBase = 0.0;
      for(let i=0;i<count;i++){
        // sample heart-like region
        let x,y,ok=false;
        for(let t=0;t<40 && !ok;t++){
          const nx = (Math.random()*2-1);
          const ny = (Math.random()*2-1);
          // implicit heart-ish: (x^2 + y^2 - 1)^3 - x^2 y^3 <= 0
          const a = (nx*nx + ny*ny - 1);
          const f = a*a*a - (nx*nx)*(ny*ny*ny);
          if(f <= 0.02){
            x = (nx*0.48 + 0.5) * w;
            y = (0.55 - ny*0.42) * h;
            ok = true;
          }
        }
        if(!ok){ x=Math.random()*w; y=Math.random()*h; }
        const delay = delayBase + Math.random()*0.55;
        makeLeaf(Math.floor(x), Math.floor(y), delay);
      }
    }

    // Falling hearts
    const fallLayer = $("#fallLayer");
    function seedFalling(){
      fallLayer.innerHTML="";
      const n = 18;
      for(let i=0;i<n;i++){
        const f = document.createElement("div");
        f.className="fall";
        f.style.setProperty("--x", (Math.random()*100).toFixed(2)+"%");
        f.style.setProperty("--t", (4.8+Math.random()*4.5).toFixed(2)+"s");
        f.style.setProperty("--c", heartColors[Math.floor(Math.random()*heartColors.length)]);
        f.style.animationDelay = (-Math.random()*6).toFixed(2)+"s";
        fallLayer.appendChild(f);
      }
    }

    // Start animation
    const startBtn = $("#startBtn");
    const centerWrap = $("#centerWrap");
    const tree = $("#tree");
    const treeWrap = $("#treeWrap");
    const letter = $("#letter");

    let started = false;

    startBtn.addEventListener("click", ()=>{
      if(started) return;
      started = true;

      hintEl.textContent = "✨ Creando el árbol...";
      centerWrap.classList.add("hide");

      // start trunk/branches
      tree.classList.add("animate");

      // after trunk/branches, create canopy
      setTimeout(()=>{
        buildCanopy();
      }, 1100);

      // show falling hearts
      setTimeout(()=>{
        seedFalling();
        fallLayer.classList.add("on");
      }, 1500);

      // move tree to the right + show letter
      setTimeout(()=>{
        treeWrap.classList.add("right");
        letter.classList.add("show");
        hintEl.textContent = TITLE_HINT_DONE;
      }, 2400);
    });
  </script>
</body>
  </html>
